<section
  class="py-16 bg-amber-50 min-vh-100 d-flex align-items-center justify-content-center"
>
  <div class="container mx-auto px-4">
    <h2 class="text-4xl md:text-5xl font-bold text-center text-pink-600 mb-12">
      Cadastre-se no Clube de Doces
    </h2>

    <div class="max-w-md mx-auto bg-white rounded-xl shadow-lg p-8">
      <h3 class="text-2xl font-bold text-pink-600 mb-6 text-center">
        Preencha seus dados
      </h3>

      <form (ngSubmit)="submitRegistrationForm()" #registerForm="ngForm">
        <div class="mb-4">
          <label for="name" class="d-block text-gray-700 text-sm font-bold mb-2"
            >Nome Completo</label
          >
          <input
            type="text"
            id="name"
            name="name"
            [(ngModel)]="registerData.name"
            required
            class="shadow appearance-none border rounded w-100 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          />
        </div>

        <div class="mb-4">
          <label
            for="email"
            class="d-block text-gray-700 text-sm font-bold mb-2"
            >E-mail</label
          >
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="registerData.email"
            required
            email
            class="shadow appearance-none border rounded w-100 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          />
        </div>

        <div class="mb-6">
          <label
            for="phone"
            class="d-block text-gray-700 text-sm font-bold mb-2"
            >Telefone</label
          >
          <input
            type="tel"
            id="phone"
            name="phone"
            [(ngModel)]="registerData.phone"
            required
            pattern="[0-9]{10,11}"
            class="shadow appearance-none border rounded w-100 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          />
        </div>
        <!-- Campo de Senha com botão para mostrar/ocultar -->
        <div class="mb-6 relative">
          <label
            for="password"
            class="d-block text-gray-700 text-sm font-bold mb-2"
            >Senha</label
          >
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            name="password"
            [(ngModel)]="registerData.password"
            required
            minlength="6"
            class="shadow appearance-none border rounded w-100 py-2 px-3 pr-10 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          />
          <span
            (click)="togglePasswordVisibility()"
            class="absolute right-1 top-3/4 -translate-y-1/2 cursor-pointer text-gray-500 hover:text-pink-600"
          >
            <i
              class="fa"
              [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"
            ></i>
          </span>
        </div>

        <!-- Checkbox de aceitar termos -->
        <div class="mb-4 form-check">
          <input
            type="checkbox"
            id="termsAccepted"
            name="termsAccepted"
            [(ngModel)]="termsAccepted"
            required
            class="form-check-input"
          />
          <label
            for="termsAccepted"
            class="form-check-label text-gray-700 text-sm"
          >
            Eu aceito os
            <a
              (click)="openTermsModal()"
              class="text-pink-600 hover:text-pink-800 cursor-pointer text-decoration-underline"
              >Termos e Condições</a
            >.
          </label>
        </div>

        <div class="flex items-center justify-center">
          <button
            type="submit"
            [disabled]="!registerForm.form.valid || !termsAccepted"
            class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-6 rounded-full focus:outline-none focus:shadow-outline transition disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Cadastrar
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- Modal de Termos e Condições (Movido para cá) -->
<div
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
  *ngIf="isTermsModalOpen"
>
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl relative">
    <h3 class="text-2xl font-bold text-pink-600 mb-4">
      Termos e Condições do Clube de Doces
    </h3>
    <div class="max-h-96 overflow-y-auto text-gray-700 mb-6">
      <p>
        <strong>1. Aceitação dos Termos:</strong> Ao se cadastrar no Clube de
        Doces da RKM Confeitaria, você concorda em cumprir e estar vinculado a
        estes Termos e Condições. Se você não concordar com qualquer parte
        destes termos, não deverá se cadastrar.
      </p>
      <p>
        <strong>2. Elegibilidade:</strong> O Clube de Doces está disponível para
        indivíduos maiores de 18 anos. Ao se cadastrar, você declara e garante
        que cumpre este requisito de idade.
      </p>
      <p>
        <strong>3. Benefícios do Clube:</strong> Os membros do Clube de Doces
        terão acesso a descontos exclusivos (como 15% na primeira compra),
        cupons de aniversário, acesso antecipado a novos produtos e outras
        promoções que podem ser oferecidas periodicamente pela RKM Confeitaria.
      </p>
      <p>
        <strong>4. Uso dos Dados Pessoais:</strong> Seus dados pessoais
        fornecidos no cadastro serão utilizados para gerenciar sua conta no
        clube, enviar comunicações sobre promoções e novidades, e personalizar
        sua experiência, sempre em conformidade com nossa Política de
        Privacidade. Não compartilharemos seus dados com terceiros sem seu
        consentimento expresso.
      </p>
      <p>
        <strong>5. Comunicações:</strong> Ao se cadastrar, você concorda em
        receber e-mails e mensagens promocionais da RKM Confeitaria. Você pode
        optar por não receber essas comunicações a qualquer momento, seguindo as
        instruções de descadastro fornecidas nos e-mails.
      </p>
      <p>
        <strong>6. Alterações nos Termos:</strong> A RKM Confeitaria reserva-se
        o direito de modificar estes Termos e Condições a qualquer momento.
        Quaisquer alterações serão publicadas em nosso site e entrarão em vigor
        imediatamente após a publicação.
      </p>
      <p>
        <strong>7. Rescisão:</strong> A RKM Confeitaria pode, a seu critério,
        suspender ou encerrar sua participação no Clube de Doces a qualquer
        momento, com ou sem aviso prévio, por qualquer motivo, incluindo, mas
        não se limitando a, violação destes Termos.
      </p>
      <p>
        <strong>8. Limitação de Responsabilidade:</strong> A RKM Confeitaria não
        será responsável por quaisquer danos diretos, indiretos, incidentais,
        especiais ou consequenciais resultantes do uso ou da incapacidade de
        usar os benefícios do Clube de Doces.
      </p>
      <p>
        <strong>9. Lei Aplicável:</strong> Estes Termos e Condições serão
        regidos e interpretados de acordo com as leis do Brasil, sem considerar
        seus princípios de conflito de leis.
      </p>
      <p>
        <strong>10. Contato:</strong> Para quaisquer dúvidas sobre estes Termos
        e Condições ou sobre o Clube de Doces, entre em contato conosco através
        dos canais disponíveis em nosso site.
      </p>
    </div>
    <div class="flex justify-end gap-4">
      <button
        (click)="closeTermsModal()"
        class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full transition"
      >
        Fechar
      </button>
      <button
        (click)="acceptTerms()"
        class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-full transition"
      >
        Aceitar Termos
      </button>
    </div>
  </div>
</div>

<!-- Modal de Confirmação de Cadastro -->
<div
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
  *ngIf="isConfirmationModalOpen"
>
  <div
    class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative text-center"
  >
    <h3 class="text-2xl font-bold text-pink-600 mb-4">
      Cadastro Realizado com Sucesso!
    </h3>
    <p class="text-gray-700 mb-6">
      Seja bem-vindo(a) {{ registerData.name }} ao mundo dos sabores da RKM
      Confeitaria!
    </p>
    <button
      (click)="closeConfirmationModal()"
      class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-6 rounded-full transition"
    >
      Continuar
    </button>
  </div>
</div>
